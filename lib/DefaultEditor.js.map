{"version":3,"sources":["../src/DefaultEditor.js"],"names":["DefaultEditor","props","context","hasTransforms","bind","hasAxes","hasMenus","hasSliders","hasColorbars","hasLegend","fullData","some","d","TRANSFORMABLE_TRACES","includes","type","Object","keys","fullLayout","_subplots","filter","length","updatemenus","layout","sliders","t","showlegend","undefined","TRACE_TO_AXIS","geo","mapbox","_","localize","logo","logoSrc","menuPanelOrder","hasMaps","children","Component","propTypes","PropTypes","node","string","array","contextTypes","func","object"],"mappings":"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","sourcesContent":["import {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {PanelMenuWrapper} from './components';\nimport {\n  GraphCreatePanel,\n  GraphTransformsPanel,\n  GraphSubplotsPanel,\n  StyleLayoutPanel,\n  StyleAxesPanel,\n  StyleMapsPanel,\n  StyleLegendPanel,\n  StyleNotesPanel,\n  StyleShapesPanel,\n  StyleSlidersPanel,\n  StyleImagesPanel,\n  StyleTracesPanel,\n  StyleColorbarsPanel,\n  StyleUpdateMenusPanel,\n} from './default_panels';\nimport {traceHasColorbar} from './default_panels/StyleColorbarsPanel';\nimport Logo from './components/widgets/Logo';\nimport {TRANSFORMABLE_TRACES, TRACE_TO_AXIS} from './lib/constants';\n\nclass DefaultEditor extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.hasTransforms = this.hasTransforms.bind(this);\n    this.hasAxes = this.hasAxes.bind(this);\n    this.hasMenus = this.hasMenus.bind(this);\n    this.hasSliders = this.hasSliders.bind(this);\n    this.hasColorbars = this.hasColorbars.bind(this);\n    this.hasLegend = this.hasLegend.bind(this);\n  }\n\n  hasTransforms() {\n    return this.context.fullData.some((d) => TRANSFORMABLE_TRACES.includes(d.type));\n  }\n\n  hasAxes() {\n    return (\n      Object.keys(this.context.fullLayout._subplots).filter(\n        (type) =>\n          !['cartesian', 'mapbox'].includes(type) &&\n          this.context.fullLayout._subplots[type].length > 0\n      ).length > 0\n    );\n  }\n\n  hasMenus() {\n    const {\n      fullLayout: {updatemenus = []},\n    } = this.context;\n\n    return updatemenus.length > 0;\n  }\n\n  hasSliders() {\n    const {\n      layout: {sliders = []},\n    } = this.context;\n\n    return sliders.length > 0;\n  }\n\n  hasColorbars() {\n    return this.context.fullData.some((d) => traceHasColorbar({}, d));\n  }\n\n  hasLegend() {\n    return this.context.fullData.some((t) => t.showlegend !== undefined); // eslint-disable-line no-undefined\n  }\n\n  hasMaps() {\n    return this.context.fullData.some((d) =>\n      [...TRACE_TO_AXIS.geo, ...TRACE_TO_AXIS.mapbox].includes(d.type)\n    );\n  }\n\n  render() {\n    const _ = this.context.localize;\n    const logo = this.props.logoSrc && <Logo src={this.props.logoSrc} />;\n\n    return (\n      <PanelMenuWrapper menuPanelOrder={this.props.menuPanelOrder}>\n        {logo ? logo : null}\n        <GraphCreatePanel group={_('Structure')} name={_('Traces')} />\n        <GraphSubplotsPanel group={_('Structure')} name={_('Subplots')} />\n        {this.hasTransforms() && (\n          <GraphTransformsPanel group={_('Structure')} name={_('Transforms')} />\n        )}\n        <StyleLayoutPanel group={_('Style')} name={_('General')} />\n        <StyleTracesPanel group={_('Style')} name={_('Traces')} />\n        {this.hasAxes() && <StyleAxesPanel group={_('Style')} name={_('Axes')} />}\n        {this.hasMaps() && <StyleMapsPanel group={_('Style')} name={_('Maps')} />}\n        {this.hasLegend() && <StyleLegendPanel group={_('Style')} name={_('Legend')} />}\n        {this.hasColorbars() && <StyleColorbarsPanel group={_('Style')} name={_('Color Bars')} />}\n        <StyleNotesPanel group={_('Annotate')} name={_('Text')} />\n        <StyleShapesPanel group={_('Annotate')} name={_('Shapes')} />\n        <StyleImagesPanel group={_('Annotate')} name={_('Images')} />\n        {this.hasSliders() && <StyleSlidersPanel group={_('Control')} name={_('Sliders')} />}\n        {this.hasMenus() && <StyleUpdateMenusPanel group={_('Control')} name={_('Menus')} />}\n        {this.props.children ? this.props.children : null}\n      </PanelMenuWrapper>\n    );\n  }\n}\n\nDefaultEditor.propTypes = {\n  children: PropTypes.node,\n  logoSrc: PropTypes.string,\n  menuPanelOrder: PropTypes.array,\n};\n\nDefaultEditor.contextTypes = {\n  localize: PropTypes.func,\n  fullData: PropTypes.array,\n  fullLayout: PropTypes.object,\n  layout: PropTypes.object,\n};\n\nexport default DefaultEditor;\n"],"file":"DefaultEditor.js"}