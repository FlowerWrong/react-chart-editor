{"version":3,"sources":["../../../src/components/fields/AxesSelector.js"],"names":["AxesSelector","props","context","_","localize","axesTargetHandler","Error","axesTarget","fullLayout","axesOptions","maxCharsThatFitInRadio","maxOptions","length","multipleSublots","_subplots","Object","values","some","s","options","map","option","value","label","title","meta","totalCharsInOptions","o","reduce","acc","Component","contextTypes","PropTypes","func","string","object","propTypes","array"],"mappings":"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","sourcesContent":["import Field from './Field';\nimport PropTypes from 'prop-types';\nimport Dropdown from '../widgets/Dropdown';\nimport RadioBlocks from '../widgets/RadioBlocks';\nimport {Component} from 'react';\nimport {getParsedTemplateString} from '../../lib';\n\nclass AxesSelector extends Component {\n  constructor(props, context) {\n    super(props, context);\n    const {localize: _} = context;\n\n    if (!context.axesTargetHandler) {\n      throw new Error(_('AxesSelector must be nested within a connectAxesToPlot component'));\n    }\n  }\n\n  render() {\n    const {axesTargetHandler, axesTarget, fullLayout, localize: _} = this.context;\n    const {axesOptions} = this.props;\n    const maxCharsThatFitInRadio = 27;\n    const maxOptions = axesOptions.length > 4; // eslint-disable-line\n\n    const multipleSublots =\n      fullLayout &&\n      fullLayout._subplots &&\n      Object.values(fullLayout._subplots).some((s) => s.length > 1);\n\n    const options = multipleSublots\n      ? axesOptions.map((option) =>\n          option.value === 'allaxes'\n            ? option\n            : {\n                label: getParsedTemplateString(option.title, {\n                  meta: fullLayout.meta,\n                }),\n                value: option.value,\n              }\n        )\n      : axesOptions;\n\n    const totalCharsInOptions =\n      (options && options.map((o) => o.label).reduce((acc, o) => acc + o.length, 0)) || 0;\n\n    return maxOptions || totalCharsInOptions >= maxCharsThatFitInRadio ? (\n      <Field {...this.props} label={_('Axis to Style')}>\n        <Dropdown\n          options={options}\n          value={axesTarget}\n          onChange={axesTargetHandler}\n          clearable={false}\n        />\n      </Field>\n    ) : (\n      <Field {...this.props} center>\n        <RadioBlocks\n          options={options}\n          activeOption={axesTarget}\n          onOptionChange={axesTargetHandler}\n        />\n      </Field>\n    );\n  }\n}\n\nAxesSelector.contextTypes = {\n  axesTargetHandler: PropTypes.func,\n  axesTarget: PropTypes.string,\n  fullLayout: PropTypes.object,\n  localize: PropTypes.func,\n};\n\nAxesSelector.propTypes = {\n  axesOptions: PropTypes.array,\n};\n\nexport default AxesSelector;\n"],"file":"AxesSelector.js"}