{"version":3,"sources":["../../../src/components/fields/LocationSelector.js"],"names":["LocationmodeVisible","UnconnectedDropdown","modifyPlotProps","props","context","plotProps","fullValue","isVisible","container","locationmode","UnconnectedLocation","_","localize","label","value","Component","propTypes","attr","PropTypes","string","Field","contextTypes","func","updateContainer","Location","UnconnectedLocationSelector","state","mode","locations","setMode","bind","setState","locationssrc","locationmodesrc","lat","lon","latsrc","lonsrc","type","any","updatePlot","object"],"mappings":"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","sourcesContent":["import {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connectToContainer} from 'lib';\nimport Field from './Field';\nimport Radio from './Radio';\nimport {UnconnectedDropdown} from './Dropdown';\nimport DataSelector from './DataSelector';\n\nconst LocationmodeVisible = connectToContainer(UnconnectedDropdown, {\n  modifyPlotProps: (props, context, plotProps) => {\n    if (!plotProps.fullValue) {\n      plotProps.isVisible = true;\n      plotProps.fullValue = plotProps.container.locationmode;\n      return;\n    }\n  },\n});\n\nclass UnconnectedLocation extends Component {\n  render() {\n    const {localize: _} = this.context;\n\n    return (\n      <>\n        <DataSelector label={_('Locations')} attr=\"locations\" />\n        <LocationmodeVisible\n          label={_('Location Format')}\n          attr=\"locationmode\"\n          clearable={false}\n          options={[\n            {label: _('GeoJSON feature'), value: 'geojson-id'},\n            {label: _('Country Names'), value: 'country names'},\n            {label: _('Country Abbreviations (ISO-3)'), value: 'ISO-3'},\n            {\n              label: _('USA State Abbreviations (e.g. NY)'),\n              value: 'USA-states',\n            },\n            {\n              label: _('China province ISO 3166-2:CN (e.g. TW)'),\n              value: 'ISO 3166-2:CN',\n            }\n          ]}\n        />\n      </>\n    );\n  }\n}\n\nUnconnectedLocation.propTypes = {\n  attr: PropTypes.string,\n  ...Field.propTypes,\n};\n\nUnconnectedLocation.contextTypes = {\n  localize: PropTypes.func,\n  updateContainer: PropTypes.func,\n};\n\nconst Location = connectToContainer(UnconnectedLocation);\n\nclass UnconnectedLocationSelector extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      mode: props.container.locations ? 'location' : 'latlon',\n    };\n\n    this.setMode = this.setMode.bind(this);\n  }\n\n  UNSAFE_componentWillMount() {\n    this.setState({\n      mode: this.props.container.locations ? 'location' : 'latlon',\n    });\n  }\n\n  setMode(mode) {\n    this.setState({mode: mode});\n    this.props.updateContainer(\n      mode === 'latlon'\n        ? {\n            locations: null,\n            locationmode: null,\n            locationssrc: null,\n            locationmodesrc: null,\n          }\n        : {lat: null, lon: null, latsrc: null, lonsrc: null}\n    );\n  }\n\n  render() {\n    const {mode} = this.state;\n    const {\n      localize: _,\n      container: {type: type},\n    } = this.context;\n\n    if (type === 'scattergeo') {\n      return (\n        <>\n          <Field {...this.props} attr={this.props.attr}>\n            <Radio\n              options={[\n                {value: 'latlon', label: _('Lat/Lon')},\n                {value: 'location', label: _('Location')},\n              ]}\n              fullValue={mode}\n              updatePlot={this.setMode}\n              attr={this.props.attr}\n            />\n          </Field>\n          {mode === 'latlon' ? (\n            <>\n              <DataSelector label={_('Latitude')} attr=\"lat\" />\n              <DataSelector label={_('Longitude')} attr=\"lon\" />\n            </>\n          ) : (\n            <Location attr=\"type\" />\n          )}\n        </>\n      );\n    } else if (type === 'choropleth') {\n      return <Location attr=\"type\" />;\n    } else if (type === 'choroplethmapbox') {\n      return <DataSelector label={_('Locations')} attr=\"locations\" />;\n    }\n    return (\n      <>\n        <DataSelector label={_('Latitude')} attr=\"lat\" />\n        <DataSelector label={_('Longitude')} attr=\"lon\" />\n      </>\n    );\n  }\n}\n\nUnconnectedLocationSelector.propTypes = {\n  fullValue: PropTypes.any,\n  updatePlot: PropTypes.func,\n  attr: PropTypes.string,\n  ...Field.propTypes,\n};\n\nUnconnectedLocationSelector.contextTypes = {\n  container: PropTypes.object,\n  localize: PropTypes.func,\n  updateContainer: PropTypes.func,\n};\n\nexport default connectToContainer(UnconnectedLocationSelector);\n"],"file":"LocationSelector.js"}