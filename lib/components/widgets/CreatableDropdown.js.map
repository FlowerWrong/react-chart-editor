{"version":3,"sources":["../../../src/components/widgets/CreatableDropdown.js"],"names":["CreatableDropdown","props","onChange","bind","selection","multi","valueKey","map","s","minWidth","placeholder","clearable","value","options","noResultsText","disabled","className","width","_","context","localize","dropdownStyle","opts","opt","label","dropdownContainerClass","backgroundDark","filter","o","Array","isArray","includes","components","Component","defaultProps","propTypes","PropTypes","bool","func","isRequired","array","oneOfType","string","object","number","any","contextTypes"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport CreatableSelect from 'react-select/creatable';\nimport classnames from 'classnames';\n\nclass CreatableDropdown extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(selection) {\n    const {multi, onChange, valueKey} = this.props;\n\n    if (!selection) {\n      return onChange(null);\n    }\n\n    return multi ? onChange(selection.map((s) => s[valueKey])) : onChange(selection[valueKey]);\n  }\n\n  render() {\n    const {\n      minWidth,\n      placeholder,\n      clearable,\n      value,\n      options,\n      multi,\n      noResultsText,\n      valueKey,\n      disabled,\n      className,\n      width,\n    } = this.props;\n\n    const {localize: _} = this.context;\n\n    const dropdownStyle = {minWidth};\n    if (width) {\n      dropdownStyle.width = width;\n    }\n\n    const opts = options.map((opt) =>\n      typeof opt === 'string' ? {label: opt, [valueKey]: opt} : opt\n    );\n\n    const dropdownContainerClass = classnames('dropdown-container', {\n      'dropdown--dark': this.props.backgroundDark,\n      [className]: className,\n    });\n\n    return (\n      <div className={dropdownContainerClass} style={dropdownStyle}>\n        <CreatableSelect\n          placeholder={placeholder || _('Select an Option')}\n          isClearable={clearable}\n          value={opts.filter((o) =>\n            Array.isArray(value) ? value.includes(o[valueKey]) : value === o[valueKey]\n          )}\n          options={opts}\n          onChange={this.onChange}\n          isMulti={multi}\n          noOptionsMessage={() => noResultsText || _('No Results')}\n          getOptionValue={(o) => o[valueKey]}\n          getOptionLabel={(o) => o.label}\n          isDisabled={disabled}\n          className={dropdownContainerClass}\n          classNamePrefix=\"Select\"\n          components={this.props.components}\n        />\n      </div>\n    );\n  }\n}\n\nCreatableDropdown.defaultProps = {\n  clearable: true,\n  multi: false,\n  minWidth: '120px',\n  valueKey: 'value',\n  disabled: false,\n};\n\nCreatableDropdown.propTypes = {\n  backgroundDark: PropTypes.bool,\n  clearable: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  options: PropTypes.array.isRequired,\n  placeholder: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  minWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  valueKey: PropTypes.string,\n  value: PropTypes.any,\n  multi: PropTypes.bool,\n  components: PropTypes.object,\n  noResultsText: PropTypes.string,\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n};\n\nCreatableDropdown.contextTypes = {\n  localize: PropTypes.func,\n};\n\nexport default CreatableDropdown;\n"],"file":"CreatableDropdown.js"}